<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RSVP Gallery 2.0 - Enhanced Construction Timeline</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: "Neue Haas Grotesk", -apple-system, BlinkMacSystemFont, sans-serif;
            -webkit-text-size-adjust: 100%;
            -webkit-font-smoothing: antialiased;
        }
        .gantt-bar {
            height: 32px;
            border-radius: 16px;
            position: relative;
            transition: all 0.3s ease;
            cursor: grab;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            font-weight: 500;
            color: white;
            border: 1px solid rgba(0,0,0,0.1);
            user-select: none;
        }
        .gantt-bar:hover {
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            cursor: grab;
        }
        .gantt-bar:active {
            cursor: grabbing;
        }
        .gantt-bar.dragging {
            cursor: grabbing;
            z-index: 1000;
            opacity: 0.8;
        }
        .resize-handle {
            position: absolute;
            right: -4px;
            top: 0;
            bottom: 0;
            width: 8px;
            cursor: ew-resize;
            background: rgba(255,255,255,0.3);
            border-radius: 0 16px 16px 0;
            opacity: 0;
            transition: opacity 0.2s;
        }
        .gantt-bar:hover .resize-handle {
            opacity: 1;
        }
        .resize-handle:hover {
            background: rgba(255,255,255,0.5);
        }
        .milestone {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            position: absolute;
            top: 10px;
            transform: translateX(-50%);
            border: 2px solid white;
            z-index: 10;
        }
        .phase-header {
            position: sticky;
            left: 0;
            z-index: 20;
            background-color: white;
            border-right: 1px solid #e5e7eb;
        }
        .gantt-container {
            overflow-x: auto;
            scrollbar-width: thin;
            scrollbar-color: #9ca3af #f3f4f6;
            -webkit-overflow-scrolling: touch;
        }
        .gantt-container::-webkit-scrollbar {
            height: 6px;
        }
        .gantt-container::-webkit-scrollbar-track {
            background: #f3f4f6;
        }
        .gantt-container::-webkit-scrollbar-thumb {
            background: #9ca3af;
        }
        .date-cell {
            min-width: 80px;
            height: 100%;
            border-right: 1px solid #e5e7eb;
            transition: background-color 0.2s ease;
        }
        .date-cell:hover {
            background-color: #f9fafb;
        }
        .task-details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
            opacity: 0;
        }
        .task-details.open {
            max-height: 1000px;
            transition: max-height 0.5s ease-in;
            opacity: 1;
        }
        .progress-bar {
            height: 6px;
            background-color: #e5e7eb;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            transition: width 0.8s ease;
            background: currentColor;
        }
        .critical-path {
            border: 2px solid #dc2626;
            background: #dc2626;
        }
        .extended-phase {
            border: 2px solid #f59e0b;
            background: #f59e0b;
            position: relative;
        }
        .extended-indicator {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 16px;
            height: 16px;
            background: #f59e0b;
            border-radius: 50%;
            color: white;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 1px solid white;
        }
        .delay-warning {
            position: absolute;
            top: -20px;
            right: 0;
            background: #fbbf24;
            color: #92400e;
            font-size: 8px;
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 600;
        }
        .risk-indicator {
            position: absolute;
            top: -8px;
            right: -8px;
            width: 16px;
            height: 16px;
            background: #dc2626;
            border-radius: 50%;
            color: white;
            font-size: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            border: 1px solid white;
        }
        .task-row {
            transition: all 0.2s ease;
        }
        .task-row:hover {
            background-color: #f9fafb;
        }
        .phase-divider {
            height: 1px;
            background: #e5e7eb;
            margin: 24px 0;
        }
        .budget-badge {
            font-size: 10px;
            padding: 4px 8px;
            background: #f3f4f6;
            color: #374151;
            border: 1px solid #d1d5db;
            font-weight: 500;
        }
        .week-indicator {
            position: absolute;
            top: -20px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 9px;
            color: #6b7280;
            background: white;
            padding: 2px 6px;
            border: 1px solid #d1d5db;
            font-weight: 500;
        }
        .task-checkbox {
            margin-right: 8px;
            width: 16px;
            height: 16px;
            accent-color: #1f2937;
            cursor: pointer;
        }
        .architect-task {
            accent-color: #6b7280;
        }
        .task-item {
            display: flex;
            align-items: center;
            padding: 6px 0;
            transition: all 0.2s ease;
            border-left: 2px solid transparent;
        }
        .task-item:hover {
            background-color: #f9fafb;
            border-left: 2px solid #e5e7eb;
            padding-left: 8px;
        }
        .task-item.completed {
            text-decoration: line-through;
            opacity: 0.6;
            color: #059669;
        }
        .progress-animation {
            animation: progressPulse 0.5s ease-in-out;
        }
        @keyframes progressPulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
        .payment-milestone {
            position: relative;
            padding: 12px;
            margin: 8px 0;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 1px solid #0ea5e9;
            border-radius: 0px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .payment-milestone:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);
        }
        .payment-milestone.completed {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
            border-color: #22c55e;
        }
        .payment-milestone.completed:hover {
            box-shadow: 0 4px 12px rgba(34, 197, 94, 0.15);
        }
        .payment-milestone.overdue {
            background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
            border-color: #ef4444;
        }
        .impact-alert {
            background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
            border: 1px solid #f59e0b;
            border-radius: 8px;
            padding: 12px;
            margin: 16px 0;
        }
        
        /* Mobile optimizations */
        @media (max-width: 768px) {
            .container {
                padding-left: 1rem;
                padding-right: 1rem;
            }
            .gantt-bar {
                height: 28px;
                font-size: 10px;
            }
            .date-cell {
                min-width: 70px;
            }
            .phase-header {
                font-size: 14px;
            }
            .task-checkbox {
                width: 20px;
                height: 20px;
                margin-right: 12px;
            }
            .task-item {
                padding: 12px 0;
                min-height: 44px;
            }
            .payment-milestone {
                padding: 16px;
                margin: 12px 0;
            }
            .gantt-container::-webkit-scrollbar {
                height: 8px;
            }
            input[type="date"], button {
                min-height: 44px;
                font-size: 16px;
            }
            .text-xs {
                font-size: 13px;
            }
            .text-sm {
                font-size: 15px;
            }
        }
        
        @media (min-width: 769px) and (max-width: 1024px) {
            .phase-header {
                min-width: 320px;
            }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8">
        <!-- Header -->
        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8">
            <div>
                <div class="flex flex-col sm:flex-row items-start sm:items-center mb-3">
                    <div class="mr-0 sm:mr-4 mb-3 sm:mb-0" style="height: 60px;">
                        <img src="https://artisanalmetals.com/wp-content/uploads/2025/07/chilab-logo-draft-2-copy.jpg" alt="ChiLab Studio" class="h-full w-auto object-contain">
                    </div>
                    <div>
                        <h1 class="text-3xl sm:text-4xl font-bold text-gray-900">RSVP Gallery 2.0</h1>
                        <p class="text-gray-600">High-End Retail Gallery Buildout - Enhanced Timeline Management</p>
                    </div>
                </div>
                <div class="grid grid-cols-2 lg:grid-cols-4 gap-3 text-sm">
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-map-marker-alt mr-2 text-blue-500"></i>
                        <span class="break-words">212 N Aberdeen Street, Chicago</span>
                    </div>
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-ruler-combined mr-2 text-yellow-500"></i>
                        3,855 Square Feet
                    </div>
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-dollar-sign mr-2 text-green-500"></i>
                        $450,000 Budget
                    </div>
                    <div class="flex items-center text-gray-600">
                        <i class="fas fa-calendar mr-2 text-red-500"></i>
                        <span id="total-duration">18 Week Duration</span>
                    </div>
                </div>
            </div>
            <div class="mt-6 lg:mt-0">
                <div class="bg-white p-6 border border-gray-300">
                    <div class="text-sm space-y-2">
                        <div>
                            <div class="font-medium text-gray-900">Project Architect</div>
                            <div class="text-gray-600">Norman Kelley Architecture</div>
                        </div>
                        <div>
                            <div class="font-medium text-gray-900">General Contractor</div>
                            <div class="text-gray-600">ChiLab Studio LLC</div>
                        </div>
                        <div>
                            <div class="font-medium text-gray-900">Subcontractor</div>
                            <div class="text-gray-500">Max Davis Group</div>
                        </div>
                        <div class="mt-4 pt-2 border-t border-gray-200">
                            <a href="https://artisanalmetals.com/wp-content/uploads/2025/07/250604-212-n-aberdeen-arch-pricing-set.pdf" 
                               target="_blank" 
                               class="inline-flex items-center text-blue-600 hover:text-blue-800 text-sm font-medium">
                                <i class="fas fa-file-pdf mr-2"></i>
                                Issue for Construction
                                <i class="fas fa-external-link-alt ml-1 text-xs"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Schedule Impact Alert -->
        <div id="impact-alert" class="impact-alert hidden">
            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <i class="fas fa-exclamation-triangle text-amber-600 text-xl"></i>
                </div>
                <div class="ml-4">
                    <h3 class="text-lg font-semibold text-amber-800 mb-2">Schedule Impact Detected</h3>
                    <div id="impact-details" class="text-sm text-amber-700 space-y-1">
                        <!-- Impact details will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Project Overview -->
        <div class="bg-white border border-gray-300 overflow-hidden mb-8">
            <div class="p-6">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4 sm:mb-0">Project Progress Overview</h2>
                    <div class="flex flex-col sm:flex-row items-start sm:items-center space-y-2 sm:space-y-0 sm:space-x-3 w-full sm:w-auto">
                        <span class="text-sm font-medium text-gray-600">0%</span>
                        <div class="w-full sm:w-72 bg-gray-200 h-3">
                            <div id="overall-progress" class="h-3 bg-gray-900 transition-all duration-1000" style="width: 0%"></div>
                        </div>
                        <span class="text-sm font-medium text-gray-600">100%</span>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4">
                    <div class="bg-gradient-to-br from-blue-50 to-blue-100 p-5 border border-blue-200 relative">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-semibold text-blue-800">Phase 1</h3>
                            <div class="flex items-center gap-2">
                                <span id="phase-1-status-badge" class="text-xs bg-blue-200 text-blue-800 px-2 py-1">Planned</span>
                                <i id="phase-1-extended-flag" class="fas fa-flag text-amber-500 hidden" title="Schedule Extended"></i>
                            </div>
                        </div>
                        <p class="text-sm text-blue-700 mb-3">Permits & Pre-Construction</p>
                        <div id="phase-1-weeks" class="text-xs text-blue-600 mb-2">Weeks 1-4</div>
                        <div class="progress-bar mb-2">
                            <div id="phase-1-progress" class="progress-fill bg-blue-500" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="budget-badge">$50,000</span>
                            <span id="phase-1-status" class="text-xs text-blue-600">0 of 13 tasks</span>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-green-50 to-green-100 p-5 border border-green-200 relative">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-semibold text-green-800">Phase 2</h3>
                            <div class="flex items-center gap-2">
                                <span id="phase-2-status-badge" class="text-xs bg-red-200 text-red-800 px-2 py-1">Critical</span>
                                <i id="phase-2-extended-flag" class="fas fa-flag text-amber-500 hidden" title="Schedule Extended"></i>
                            </div>
                        </div>
                        <p class="text-sm text-green-700 mb-3">Sub-Slab MEP & Concrete</p>
                        <div id="phase-2-weeks" class="text-xs text-green-600 mb-2">Weeks 5-8</div>
                        <div class="progress-bar mb-2">
                            <div id="phase-2-progress" class="progress-fill bg-green-500" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="budget-badge">$85,000</span>
                            <span id="phase-2-status" class="text-xs text-red-600"><i class="fas fa-exclamation-triangle mr-1"></i>0 of 8 tasks</span>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-yellow-50 to-yellow-100 p-5 border border-yellow-200 relative">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-semibold text-yellow-800">Phase 3</h3>
                            <div class="flex items-center gap-2">
                                <span id="phase-3-status-badge" class="text-xs bg-yellow-200 text-yellow-800 px-2 py-1">Planned</span>
                                <i id="phase-3-extended-flag" class="fas fa-flag text-amber-500 hidden" title="Schedule Extended"></i>
                            </div>
                        </div>
                        <p class="text-sm text-yellow-700 mb-3">Framing & Above-Slab MEP</p>
                        <div id="phase-3-weeks" class="text-xs text-yellow-600 mb-2">Weeks 9-12</div>
                        <div class="progress-bar mb-2">
                            <div id="phase-3-progress" class="progress-fill bg-yellow-500" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="budget-badge">$170,000</span>
                            <span id="phase-3-status" class="text-xs text-yellow-600">0 of 8 tasks</span>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-red-50 to-red-100 p-5 border border-red-200 relative">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-semibold text-red-800">Phase 4</h3>
                            <div class="flex items-center gap-2">
                                <span id="phase-4-status-badge" class="text-xs bg-red-200 text-red-800 px-2 py-1">Planned</span>
                                <i id="phase-4-extended-flag" class="fas fa-flag text-amber-500 hidden" title="Schedule Extended"></i>
                            </div>
                        </div>
                        <p class="text-sm text-red-700 mb-3">Finishes & Custom Elements</p>
                        <div id="phase-4-weeks" class="text-xs text-red-600 mb-2">Weeks 13-16</div>
                        <div class="progress-bar mb-2">
                            <div id="phase-4-progress" class="progress-fill bg-red-500" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="budget-badge">$115,000</span>
                            <span id="phase-4-status" class="text-xs text-red-600">0 of 8 tasks</span>
                        </div>
                    </div>

                    <div class="bg-gradient-to-br from-purple-50 to-purple-100 p-5 border border-purple-200 relative">
                        <div class="flex justify-between items-start mb-3">
                            <h3 class="font-semibold text-purple-800">Phase 5</h3>
                            <div class="flex items-center gap-2">
                                <span id="phase-5-status-badge" class="text-xs bg-purple-200 text-purple-800 px-2 py-1">Planned</span>
                                <i id="phase-5-extended-flag" class="fas fa-flag text-amber-500 hidden" title="Schedule Extended"></i>
                            </div>
                        </div>
                        <p class="text-sm text-purple-700 mb-3">Final Completion</p>
                        <div id="phase-5-weeks" class="text-xs text-purple-600 mb-2">Weeks 17-18</div>
                        <div class="progress-bar mb-2">
                            <div id="phase-5-progress" class="progress-fill bg-purple-500" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="budget-badge">$30,000</span>
                            <span id="phase-5-status" class="text-xs text-purple-600">0 of 8 tasks</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timeline Controls -->
        <div class="bg-white border border-gray-300 overflow-hidden mb-8">
            <div class="p-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-6">Timeline Management</h2>
                <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center space-y-4 lg:space-y-0">
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4 w-full lg:w-auto">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Project Start Date</label>
                            <input type="date" id="start-date" class="w-full border border-gray-300 px-3 py-2 focus:outline-none focus:border-gray-900">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Progress Display</label>
                            <div class="text-lg font-semibold text-gray-900"><span id="progress-display">0%</span> Complete</div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-1">Project End Date</label>
                            <div class="text-lg font-semibold text-gray-900" id="end-date-display">TBD</div>
                        </div>
                    </div>
                    <div class="flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-3 w-full lg:w-auto">
                        <button id="reset-timeline" class="w-full sm:w-auto px-4 py-2 bg-gradient-to-r from-amber-500 to-amber-600 text-white hover:from-amber-600 hover:to-amber-700 focus:outline-none transition-colors rounded-lg">
                            <i class="fas fa-undo mr-2"></i>Reset Timeline
                        </button>
                        <button id="reset-progress" class="w-full sm:w-auto px-4 py-2 bg-gradient-to-r from-red-500 to-red-600 text-white hover:from-red-600 hover:to-red-700 focus:outline-none transition-colors rounded-lg">
                            <i class="fas fa-undo mr-2"></i>Reset Progress
                        </button>
                        <button onclick="window.print()" class="w-full sm:w-auto px-4 py-2 bg-gradient-to-r from-gray-500 to-gray-600 text-white hover:from-gray-600 hover:to-gray-700 focus:outline-none transition-colors rounded-lg">
                            <i class="fas fa-print mr-2"></i>Print
                        </button>
                        <button id="export-timeline" class="w-full sm:w-auto px-4 py-2 bg-gradient-to-r from-green-500 to-green-600 text-white hover:from-green-600 hover:to-green-700 focus:outline-none transition-colors rounded-lg">
                            <i class="fas fa-download mr-2"></i>Export
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Critical Path Alert -->
        <div class="bg-gradient-to-r from-red-50 to-orange-50 border border-red-200 p-5 mb-8">
            <div class="flex items-start">
                <div class="flex-shrink-0">
                    <i class="fas fa-exclamation-triangle text-red-500 text-xl"></i>
                </div>
                <div class="ml-4">
                    <h3 class="text-lg font-semibold text-red-800 mb-2">Critical Timeline Risk</h3>
                    <div class="text-sm text-red-700 space-y-1">
                        <p><strong>Architect Coordination:</strong> Norman Kelley Architecture handles permit submissions. GC maintains communication regarding permit status.</p>
                        <p><strong>Critical Path:</strong> Sub-slab MEP completion must occur before concrete pour (Week 8).</p>
                        <p><strong>Timeline Adjustments:</strong> Use the duration controls above to adjust phase timelines as needed. Extensions will automatically cascade to subsequent phases.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mobile scroll hint -->
        <div class="block sm:hidden bg-blue-50 border border-blue-200 p-3 mb-4 text-center">
            <i class="fas fa-arrows-alt-h mr-2 text-blue-600"></i>
            <span class="text-blue-700 text-sm">Swipe left/right to view full timeline</span>
        </div>

        <!-- Mobile interaction hint -->
        <div class="block sm:hidden bg-green-50 border border-green-200 p-3 mb-4 text-center">
            <i class="fas fa-hand-pointer mr-2 text-green-600"></i>
            <span class="text-green-700 text-sm">Tap and drag the right edge of timeline bars to adjust durations</span>
        </div>

        <!-- Gantt Chart -->
        <div class="bg-white shadow-md overflow-hidden">
            <div class="p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-semibold text-gray-800">Interactive Project Timeline</h2>
                    <div class="hidden sm:flex items-center space-x-4 text-sm text-gray-600">
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-gradient-to-r from-red-400 to-red-500 rounded mr-2"></div>
                            <span>Critical Path</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-gradient-to-r from-amber-400 to-amber-500 rounded mr-2"></div>
                            <span>Extended Phase</span>
                        </div>
                        <div class="flex items-center">
                            <div class="w-3 h-3 bg-blue-500 rounded-full mr-2"></div>
                            <span>Milestone</span>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" class="mr-2" style="accent-color: #3b82f6;">
                            <span>GC Tasks</span>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" class="mr-2" style="accent-color: #8b5cf6;">
                            <span class="italic">Architect Tasks</span>
                        </div>
                    </div>
                </div>
                
                <!-- Date Header -->
                <div class="gantt-container mb-4">
                    <div class="flex border-b-2 border-gray-200">
                        <div class="phase-header w-80 px-4 py-3 font-semibold text-gray-700 bg-gray-50">
                            <div class="flex items-center">
                                <i class="fas fa-tasks mr-2 text-blue-500"></i>
                                Phase / Activity
                            </div>
                        </div>
                        <div id="week-headers" class="flex min-w-max">
                            <!-- Week headers will be generated here -->
                        </div>
                    </div>
                </div>

                <!-- Gantt Rows -->
                <div class="gantt-container">
                    <!-- Phase content will be dynamically generated -->
                    <div id="gantt-phases">
                        <!-- Phases will be inserted here by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Payment Tracker -->
        <div class="bg-white border border-gray-300 overflow-hidden mb-8">
            <div class="p-6">
                <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6">
                    <h2 class="text-xl font-semibold text-gray-900 mb-2 sm:mb-0">Payment Schedule & Progress</h2>
                    <div class="text-sm text-gray-600">
                        Total Contract Value: <span class="font-semibold text-gray-900">$450,000</span>
                    </div>
                </div>

                <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4" id="payment-milestones">
                    <!-- Payment milestones will be populated by JavaScript -->
                </div>

                <div class="mt-6 p-4 bg-gray-50 rounded-lg">
                    <div class="flex justify-between items-center text-sm">
                        <span class="text-gray-600">Total Payments Received:</span>
                        <span id="total-payments" class="font-semibold text-gray-900">$0</span>
                    </div>
                    <div class="flex justify-between items-center text-sm mt-1">
                        <span class="text-gray-600">Remaining Balance:</span>
                        <span id="remaining-balance" class="font-semibold text-gray-900">$450,000</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center text-sm text-gray-500 mt-8 p-4 bg-white shadow-sm">
            <p class="mb-2">© 2025 ChiLab Studio LLC • General Contractor • Max Davis Group Subcontractor Support</p>
            <p>Enhanced Interactive Project Timeline • Last Updated: <span id="last-updated"></span></p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date
            document.getElementById('last-updated').textContent = new Date().toLocaleDateString();

            // Project data structure with original durations
            const projectData = {
                totalTasks: 45,
                originalTotalWeeks: 18,
                phases: {
                    1: { 
                        name: 'Permits & Pre-Construction', 
                        totalTasks: 13, 
                        completedTasks: 0, 
                        originalDuration: 4,
                        currentDuration: 4,
                        startWeek: 1,
                        isCritical: false,
                        budget: '$50,000',
                        color: 'blue'
                    },
                    2: { 
                        name: 'Sub-Slab MEP & Concrete', 
                        totalTasks: 8, 
                        completedTasks: 0,
                        originalDuration: 4,
                        currentDuration: 4,
                        startWeek: 5,
                        isCritical: true,
                        budget: '$85,000',
                        color: 'green'
                    },
                    3: { 
                        name: 'Framing & Above-Slab MEP', 
                        totalTasks: 8, 
                        completedTasks: 0,
                        originalDuration: 4,
                        currentDuration: 4,
                        startWeek: 9,
                        isCritical: false,
                        budget: '$170,000',
                        color: 'yellow'
                    },
                    4: { 
                        name: 'Finishes & Custom Elements', 
                        totalTasks: 8, 
                        completedTasks: 0,
                        originalDuration: 4,
                        currentDuration: 4,
                        startWeek: 13,
                        isCritical: false,
                        budget: '$115,000',
                        color: 'red'
                    },
                    5: { 
                        name: 'Final Completion', 
                        totalTasks: 8, 
                        completedTasks: 0,
                        originalDuration: 2,
                        currentDuration: 2,
                        startWeek: 17,
                        isCritical: false,
                        budget: '$30,000',
                        color: 'purple'
                    }
                }
            };

            // Payment tracking
            const paymentMilestones = [
                { id: 'payment-1', amount: 45000, percentage: 10, week: 0, description: 'Contract Execution', timing: 'Upon signing' },
                { id: 'payment-2', amount: 112500, percentage: 25, week: 4, description: 'Material Orders', timing: 'Week 4' },
                { id: 'payment-3', amount: 112500, percentage: 25, week: 11, description: 'Rough-in Complete', timing: 'Week 11' },
                { id: 'payment-4', amount: 112500, percentage: 25, week: 17, description: 'Substantial Completion', timing: 'Week 17' },
                { id: 'payment-5', amount: 67500, percentage: 15, week: 18, description: 'Final Completion', timing: 'Week 18' }
            ];

            let totalPaid = 0;

            // Initialize the timeline
            function initializeTimeline() {
                generateWeekHeaders();
                generateGanttChart();
                generatePaymentMilestones();
                updateProgress();
                updatePaymentDisplay();
                setupEventListeners();
            }

            // Generate week headers
            function generateWeekHeaders() {
                const totalWeeks = getTotalWeeks();
                const weekHeaderContainer = document.getElementById('week-headers');
                weekHeaderContainer.innerHTML = '';
                
                for (let i = 0; i < totalWeeks; i++) {
                    const weekCell = document.createElement('div');
                    weekCell.className = 'date-cell flex flex-col items-center justify-center px-3 py-2 text-xs font-medium text-gray-600 bg-gray-50 border-r border-gray-200';
                    
                    weekCell.innerHTML = `
                        <div class="font-bold text-gray-700">Week ${i + 1}</div>
                        <div class="text-gray-500 mt-1">Phase ${getPhaseForWeek(i + 1)}</div>
                    `;
                    
                    weekHeaderContainer.appendChild(weekCell);
                }
                
                // Update total duration display
                document.getElementById('total-duration').textContent = `${totalWeeks} Week Duration`;
            }

            // Generate Gantt chart
            function generateGanttChart() {
                const ganttPhasesContainer = document.getElementById('gantt-phases');
                ganttPhasesContainer.innerHTML = '';
                
                const totalWeeks = getTotalWeeks();
                
                Object.keys(projectData.phases).forEach(phaseNum => {
                    const phase = projectData.phases[phaseNum];
                    const isExtended = phase.currentDuration > phase.originalDuration;
                    const endWeek = phase.startWeek + phase.currentDuration - 1;
                    
                    const phaseDiv = document.createElement('div');
                    phaseDiv.className = 'mb-8';
                    
                    // Calculate position and width for Gantt bar
                    const leftPercent = ((phase.startWeek - 1) / totalWeeks) * 100;
                    const widthPercent = (phase.currentDuration / totalWeeks) * 100;
                    
                    phaseDiv.innerHTML = `
                        <div class="flex items-center mb-4 p-3 bg-${phase.color}-50 border border-${phase.color}-200">
                            <div class="w-4 h-8 bg-gradient-to-b from-${phase.color}-400 to-${phase.color}-600 mr-4"></div>
                            <div class="flex-grow">
                                <h3 class="text-lg font-semibold text-${phase.color}-800">Phase ${phaseNum}: ${phase.name}</h3>
                                <p class="text-sm text-${phase.color}-600">
                                    ${phase.isCritical ? 'Critical path activities' : 'Standard project activities'}
                                    ${isExtended ? ' - <span class="text-amber-600 font-medium">Extended Timeline</span>' : ''}
                                </p>
                            </div>
                            <div class="text-right">
                                <div class="text-sm font-medium text-${phase.color}-700">Weeks ${phase.startWeek}-${endWeek}</div>
                                <div class="text-xs text-${phase.color}-600">${phase.budget} budget</div>
                                ${isExtended ? '<div class="text-xs text-amber-600 font-medium">+' + (phase.currentDuration - phase.originalDuration) + ' weeks extended</div>' : ''}
                            </div>
                        </div>
                        
                        <div class="space-y-3">
                            <div class="task-row rounded-lg">
                                <div class="flex items-center cursor-pointer task-toggle p-2 rounded-lg hover:bg-gray-50" data-target="phase${phaseNum}-details">
                                    <div class="w-80 px-4 py-3 font-medium text-gray-700 phase-header flex items-center">
                                        <i class="fas fa-caret-right mr-3 transition-transform text-${phase.color}-500"></i>
                                        <div>
                                            <div class="font-medium">${phase.name}</div>
                                            <div class="text-xs text-gray-500">Weeks ${phase.startWeek}-${endWeek} (${phase.currentDuration} weeks)</div>
                                        </div>
                                    </div>
                                    <div class="flex-1 flex relative" style="min-height: 50px;">
                                        <div class="gantt-bar ${isExtended ? 'extended-phase' : (phase.isCritical ? 'critical-path' : `bg-gradient-to-r from-${phase.color}-400 to-${phase.color}-500`)} absolute" 
                                             style="left: ${leftPercent}%; width: ${widthPercent}%;"
                                             data-phase="${phaseNum}"
                                             data-original-duration="${phase.originalDuration}"
                                             data-current-duration="${phase.currentDuration}">
                                            ${phase.name}
                                            <div class="milestone bg-${phase.color}-700" style="left: 100%;"></div>
                                            ${isExtended ? '<div class="extended-indicator">!</div>' : (phase.isCritical ? '<div class="risk-indicator">!</div>' : '')}
                                            <div class="week-indicator">W${phase.startWeek}-${endWeek}</div>
                                            <div class="resize-handle" data-phase="${phaseNum}"></div>
                                        </div>
                                    </div>
                                </div>
                                <div id="phase${phaseNum}-details" class="task-details pl-80 ml-4 border-l-2 border-${phase.color}-200">
                                    <div class="p-6 bg-${phase.color}-50 border border-${phase.color}-100">
                                        <h4 class="font-semibold text-${phase.color}-800 mb-3">Phase ${phaseNum} Activities</h4>
                                        <p class="text-sm text-${phase.color}-700">Detailed task breakdown and coordination requirements for this phase.</p>
                                        ${isExtended ? '<div class="mt-3 p-3 bg-amber-50 border border-amber-200 rounded"><p class="text-sm text-amber-700"><strong>Timeline Extended:</strong> This phase has been extended by ' + (phase.currentDuration - phase.originalDuration) + ' week(s) beyond the original schedule.</p></div>' : ''}
                                    </div>
                                </div>
                            </div>
                        </div>
                        ${phaseNum < 5 ? '<div class="phase-divider"></div>' : ''}
                    `;
                    
                    ganttPhasesContainer.appendChild(phaseDiv);
                });
                
                // Re-attach event listeners for task toggles
                attachTaskToggleListeners();
                updatePhaseDisplays();
                
                // Setup Gantt interactions after chart is generated
                setupGanttInteractions();
            }

            // Generate payment milestones
            function generatePaymentMilestones() {
                const container = document.getElementById('payment-milestones');
                container.innerHTML = '';
                
                paymentMilestones.forEach((milestone, index) => {
                    const adjustedWeek = adjustPaymentMilestoneWeek(milestone.week);
                    const adjustedTiming = milestone.week === 0 ? milestone.timing : `Week ${adjustedWeek}`;
                    
                    const milestoneDiv = document.createElement('div');
                    milestoneDiv.className = 'payment-milestone';
                    milestoneDiv.setAttribute('data-milestone', milestone.id.split('-')[1]);
                    
                    milestoneDiv.innerHTML = `
                        <div class="flex justify-between items-start mb-2">
                            <div class="text-sm font-semibold text-blue-800">${milestone.description}</div>
                            <div class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded">${milestone.percentage}%</div>
                        </div>
                        <div class="text-lg font-bold text-blue-900 mb-1">$${milestone.amount.toLocaleString()}</div>
                        <div class="text-xs text-blue-600">${adjustedTiming}</div>
                        <div class="mt-2">
                            <input type="checkbox" id="${milestone.id}" class="payment-checkbox mr-2">
                            <label for="${milestone.id}" class="text-xs text-blue-700">Payment received</label>
                        </div>
                    `;
                    
                    container.appendChild(milestoneDiv);
                });
                
                // Re-attach payment event listeners
                attachPaymentListeners();
            }

            // Get total weeks based on current phase durations
            function getTotalWeeks() {
                let maxWeek = 0;
                Object.values(projectData.phases).forEach(phase => {
                    const endWeek = phase.startWeek + phase.currentDuration - 1;
                    if (endWeek > maxWeek) {
                        maxWeek = endWeek;
                    }
                });
                return Math.max(maxWeek, projectData.originalTotalWeeks);
            }

            // Get phase number for a given week
            function getPhaseForWeek(week) {
                for (const [phaseNum, phase] of Object.entries(projectData.phases)) {
                    const endWeek = phase.startWeek + phase.currentDuration - 1;
                    if (week >= phase.startWeek && week <= endWeek) {
                        return phaseNum;
                    }
                }
                return '5'; // Default to last phase
            }

            // Adjust payment milestone weeks based on phase extensions
            function adjustPaymentMilestoneWeek(originalWeek) {
                if (originalWeek === 0) return 0; // Contract execution
                
                // Find which phase this milestone falls in and adjust accordingly
                let adjustedWeek = originalWeek;
                let cumulativeExtension = 0;
                
                Object.values(projectData.phases).forEach(phase => {
                    if (phase.startWeek <= originalWeek) {
                        cumulativeExtension += (phase.currentDuration - phase.originalDuration);
                    }
                });
                
                return adjustedWeek + cumulativeExtension;
            }

            // Update phase displays
            function updatePhaseDisplays() {
                Object.keys(projectData.phases).forEach(phaseNum => {
                    const phase = projectData.phases[phaseNum];
                    const isExtended = phase.currentDuration > phase.originalDuration;
                    const endWeek = phase.startWeek + phase.currentDuration - 1;
                    
                    // Update phase week display
                    const weekDisplay = document.getElementById(`phase-${phaseNum}-weeks`);
                    if (weekDisplay) {
                        weekDisplay.textContent = `Weeks ${phase.startWeek}-${endWeek}`;
                    }
                    
                    // Update extended flag
                    const extendedFlag = document.getElementById(`phase-${phaseNum}-extended-flag`);
                    if (extendedFlag) {
                        if (isExtended) {
                            extendedFlag.classList.remove('hidden');
                        } else {
                            extendedFlag.classList.add('hidden');
                        }
                    }
                });
                
                // Update project end date
                updateProjectEndDate();
                checkScheduleImpact();
            }

            // Update project end date
            function updateProjectEndDate() {
                const startDateInput = document.getElementById('start-date');
                const endDateDisplay = document.getElementById('end-date-display');
                
                if (startDateInput.value) {
                    const startDate = new Date(startDateInput.value);
                    const totalWeeks = getTotalWeeks();
                    const endDate = new Date(startDate);
                    endDate.setDate(startDate.getDate() + (totalWeeks * 7));
                    
                    endDateDisplay.textContent = endDate.toLocaleDateString('en-US', { 
                        year: 'numeric', 
                        month: 'short', 
                        day: 'numeric' 
                    });
                } else {
                    endDateDisplay.textContent = 'TBD';
                }
            }

            // Check for schedule impact and show alert
            function checkScheduleImpact() {
                const totalExtension = getTotalWeeks() - projectData.originalTotalWeeks;
                const impactAlert = document.getElementById('impact-alert');
                const impactDetails = document.getElementById('impact-details');
                
                if (totalExtension > 0) {
                    let impactText = `<p><strong>Project extended by ${totalExtension} week(s)</strong></p>`;
                    
                    Object.entries(projectData.phases).forEach(([phaseNum, phase]) => {
                        const extension = phase.currentDuration - phase.originalDuration;
                        if (extension > 0) {
                            impactText += `<p>• Phase ${phaseNum}: +${extension} week(s)</p>`;
                        }
                    });
                    
                    impactText += `<p class="mt-2"><strong>Payment milestones and completion dates have been automatically adjusted.</strong></p>`;
                    
                    impactDetails.innerHTML = impactText;
                    impactAlert.classList.remove('hidden');
                } else {
                    impactAlert.classList.add('hidden');
                }
            }

            // Recalculate phase start times
            function recalculatePhaseStarts(changedPhaseNum) {
                const phases = Object.keys(projectData.phases).sort((a, b) => parseInt(a) - parseInt(b));
                
                for (let i = 0; i < phases.length; i++) {
                    const phaseNum = phases[i];
                    if (parseInt(phaseNum) > parseInt(changedPhaseNum)) {
                        const prevPhaseNum = phases[i - 1];
                        const prevPhase = projectData.phases[prevPhaseNum];
                        projectData.phases[phaseNum].startWeek = prevPhase.startWeek + prevPhase.currentDuration;
                    }
                }
            }

            // Setup Gantt chart interactions
            function setupGanttInteractions() {
                let isDragging = false;
                let isResizing = false;
                let dragStartX = 0;
                let dragPhase = null;
                let originalDuration = 0;
                let originalLeft = 0;
                let containerWidth = 0;
                let totalWeeks = 0;

                // Attach event listeners to all Gantt bars and resize handles
                document.querySelectorAll('.gantt-bar').forEach(bar => {
                    const phaseNum = bar.getAttribute('data-phase');
                    
                    // Resize handle functionality
                    const resizeHandle = bar.querySelector('.resize-handle');
                    if (resizeHandle) {
                        resizeHandle.addEventListener('mousedown', function(e) {
                            e.preventDefault();
                            e.stopPropagation();
                            
                            isResizing = true;
                            dragPhase = phaseNum;
                            dragStartX = e.clientX;
                            originalDuration = projectData.phases[phaseNum].currentDuration;
                            containerWidth = bar.parentElement.offsetWidth;
                            totalWeeks = getTotalWeeks();
                            
                            bar.classList.add('dragging');
                            document.body.style.cursor = 'ew-resize';
                            
                            document.addEventListener('mousemove', handleResize);
                            document.addEventListener('mouseup', stopResize);
                        });
                    }
                });

                function handleResize(e) {
                    if (!isResizing || !dragPhase) return;
                    
                    const deltaX = e.clientX - dragStartX;
                    const weekWidth = containerWidth / totalWeeks;
                    const weeksDelta = Math.round(deltaX / weekWidth);
                    
                    let newDuration = Math.max(1, Math.min(12, originalDuration + weeksDelta));
                    
                    if (newDuration !== projectData.phases[dragPhase].currentDuration) {
                        updatePhaseDuration(dragPhase, newDuration);
                    }
                }

                function stopResize() {
                    if (isResizing) {
                        isResizing = false;
                        dragPhase = null;
                        document.body.style.cursor = '';
                        
                        document.querySelectorAll('.gantt-bar').forEach(bar => {
                            bar.classList.remove('dragging');
                        });
                        
                        document.removeEventListener('mousemove', handleResize);
                        document.removeEventListener('mouseup', stopResize);
                        
                        showNotification('Phase duration updated successfully!', 'success');
                    }
                }

                // Prevent default drag behavior on images and other elements
                document.addEventListener('dragstart', function(e) {
                    if (e.target.closest('.gantt-bar')) {
                        e.preventDefault();
                    }
                });
            }

            // Setup event listeners
            function setupEventListeners() {
                // Gantt bar drag and resize functionality
                setupGanttInteractions();

                // Reset timeline button
                document.getElementById('reset-timeline').addEventListener('click', function() {
                    if (confirm('Reset all phases to original timeline? This will not affect task progress.')) {
                        Object.keys(projectData.phases).forEach(phaseNum => {
                            projectData.phases[phaseNum].currentDuration = projectData.phases[phaseNum].originalDuration;
                        });
                        
                        // Reset start weeks
                        projectData.phases[1].startWeek = 1;
                        projectData.phases[2].startWeek = 5;
                        projectData.phases[3].startWeek = 9;
                        projectData.phases[4].startWeek = 13;
                        projectData.phases[5].startWeek = 17;
                        
                        generateWeekHeaders();
                        generateGanttChart();
                        generatePaymentMilestones();
                        updatePhaseDisplays();
                        showNotification('Timeline reset to original schedule.', 'info');
                    }
                });

                // Reset progress button
                document.getElementById('reset-progress').addEventListener('click', function() {
                    if (confirm('Are you sure you want to reset all progress? This action cannot be undone.')) {
                        // Reset task progress
                        document.querySelectorAll('.task-checkbox').forEach(checkbox => {
                            checkbox.checked = false;
                            checkbox.closest('.task-item').classList.remove('completed');
                        });
                        
                        // Reset payment progress
                        document.querySelectorAll('.payment-checkbox').forEach(checkbox => {
                            checkbox.checked = false;
                            checkbox.closest('.payment-milestone').classList.remove('completed');
                        });
                        
                        // Reset phase progress
                        Object.keys(projectData.phases).forEach(phaseNum => {
                            projectData.phases[phaseNum].completedTasks = 0;
                        });
                        
                        totalPaid = 0;
                        updateProgress();
                        updatePaymentDisplay();
                        showNotification('All progress has been reset.', 'info');
                    }
                });

                // Start date input
                document.getElementById('start-date').addEventListener('change', function() {
                    updateProjectEndDate();
                    generatePaymentMilestones();
                    showNotification('Project dates updated successfully!', 'success');
                });

                // Export timeline
                document.getElementById('export-timeline').addEventListener('click', function() {
                    const exportData = {
                        project: 'RSVP Gallery 2.0',
                        location: '212 N Aberdeen Street, Chicago, IL',
                        contractor: 'ChiLab Studio LLC',
                        subcontractor: 'Max Davis Group',
                        totalBudget: '$450,000',
                        originalDuration: projectData.originalTotalWeeks,
                        currentDuration: getTotalWeeks(),
                        exportDate: new Date().toISOString(),
                        phases: projectData.phases,
                        payments: {
                            totalPaid: totalPaid,
                            remaining: 450000 - totalPaid,
                            milestones: paymentMilestones.map((milestone, index) => ({
                                ...milestone,
                                adjustedWeek: adjustPaymentMilestoneWeek(milestone.week),
                                completed: document.getElementById(milestone.id).checked
                            }))
                        },
                        overallProgress: Math.round((Object.values(projectData.phases).reduce((sum, phase) => sum + phase.completedTasks, 0) / projectData.totalTasks) * 100),
                        scheduleChanges: getTotalWeeks() !== projectData.originalTotalWeeks,
                        totalExtension: getTotalWeeks() - projectData.originalTotalWeeks
                    };
                    
                    const dataStr = JSON.stringify(exportData, null, 2);
                    const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
                    
                    const linkElement = document.createElement('a');
                    linkElement.setAttribute('href', dataUri);
                    linkElement.setAttribute('download', `rsvp_gallery_enhanced_timeline_${new Date().toISOString().split('T')[0]}.json`);
                    linkElement.click();
                    
                    showNotification('Enhanced timeline data exported successfully!', 'success');
                });
            }

            // Update phase duration
            function updatePhaseDuration(phaseNum, newDuration) {
                projectData.phases[phaseNum].currentDuration = newDuration;
                recalculatePhaseStarts(phaseNum);
                generateWeekHeaders();
                generateGanttChart();
                generatePaymentMilestones();
                updatePhaseDisplays();
                showNotification(`Phase ${phaseNum} duration updated to ${newDuration} weeks.`, 'info');
            }

            // Attach task toggle listeners
            function attachTaskToggleListeners() {
                document.querySelectorAll('.task-toggle').forEach(toggle => {
                    toggle.addEventListener('click', function() {
                        const targetId = this.getAttribute('data-target');
                        const target = document.getElementById(targetId);
                        const icon = this.querySelector('i.fas');
                        
                        target.classList.toggle('open');
                        
                        if (icon) {
                            icon.classList.toggle('fa-caret-right');
                            icon.classList.toggle('fa-caret-down');
                        }
                    });
                });
            }

            // Attach payment listeners
            function attachPaymentListeners() {
                const paymentCheckboxes = document.querySelectorAll('.payment-checkbox');
                const paymentMilestoneCards = document.querySelectorAll('.payment-milestone');
                
                paymentMilestoneCards.forEach((card, index) => {
                    card.addEventListener('click', function() {
                        const checkbox = paymentCheckboxes[index];
                        const milestone = paymentMilestones[index];
                        
                        checkbox.checked = !checkbox.checked;
                        
                        if (checkbox.checked) {
                            totalPaid += milestone.amount;
                            card.classList.add('completed');
                        } else {
                            totalPaid -= milestone.amount;
                            card.classList.remove('completed');
                        }
                        
                        updatePaymentDisplay();
                    });
                });

                paymentCheckboxes.forEach((checkbox, index) => {
                    checkbox.addEventListener('click', function(e) {
                        e.stopPropagation();
                    });
                    
                    checkbox.addEventListener('change', function() {
                        const milestone = paymentMilestones[index];
                        const milestoneElement = this.closest('.payment-milestone');
                        
                        if (this.checked) {
                            totalPaid += milestone.amount;
                            milestoneElement.classList.add('completed');
                        } else {
                            totalPaid -= milestone.amount;
                            milestoneElement.classList.remove('completed');
                        }
                        
                        updatePaymentDisplay();
                    });
                });
            }

            // Update progress display
            function updateProgress() {
                let totalCompleted = 0;
                
                Object.keys(projectData.phases).forEach(phaseNum => {
                    const phase = projectData.phases[phaseNum];
                    const phaseProgress = (phase.completedTasks / phase.totalTasks) * 100;
                    
                    const progressBar = document.getElementById(`phase-${phaseNum}-progress`);
                    if (progressBar) {
                        progressBar.style.width = phaseProgress + '%';
                    }
                    
                    const statusDisplay = document.getElementById(`phase-${phaseNum}-status`);
                    if (statusDisplay) {
                        statusDisplay.textContent = `${phase.completedTasks} of ${phase.totalTasks} tasks`;
                    }
                    
                    totalCompleted += phase.completedTasks;
                });
                
                const overallProgress = (totalCompleted / projectData.totalTasks) * 100;
                document.getElementById('overall-progress').style.width = overallProgress + '%';
                document.getElementById('progress-display').textContent = Math.round(overallProgress) + '%';
            }

            // Update payment display
            function updatePaymentDisplay() {
                const remaining = 450000 - totalPaid;
                document.getElementById('total-payments').textContent = '$' + totalPaid.toLocaleString();
                document.getElementById('remaining-balance').textContent = '$' + remaining.toLocaleString();
            }

            // Show notification
            function showNotification(message, type = 'info') {
                const notification = document.createElement('div');
                const colors = {
                    success: 'bg-green-500',
                    error: 'bg-red-500',
                    info: 'bg-blue-500'
                };
                
                notification.className = `fixed top-4 right-4 ${colors[type]} text-white px-6 py-3 rounded-lg shadow-lg z-50 transform transition-all duration-300 translate-x-full`;
                notification.innerHTML = `
                    <div class="flex items-center">
                        <i class="fas fa-check-circle mr-2"></i>
                        ${message}
                    </div>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.remove('translate-x-full');
                }, 100);
                
                setTimeout(() => {
                    notification.classList.add('translate-x-full');
                    setTimeout(() => notification.remove(), 300);
                }, 3000);
            }

            // Initialize the application
            initializeTimeline();
        });
    </script>
</body>
</html>